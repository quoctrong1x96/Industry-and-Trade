<mat-card>
    <mat-card-header>
        <mat-card-title>
            <h2>Danh sách báo cáo</h2>
        </mat-card-title>
        <mat-card-subtitle><br></mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
        <!-- <div class="row">
            <div class="col-lg-3">
                <div class="form-group">
                    <label for="period_select">Đơn vị báo cáo</label>
                    <select class="form-control" name="" id="organization_select">
                        <option *ngFor="let orgarnization of orgarnizations" [ngValue]="orgarnization">{{orgarnization}}</option>
                    </select>
                </div>
            </div>
        </div> -->

        <div class="row">
            <div class="col-lg-3">
                <div class="form-group">
                    <label for="period_select">Kỳ báo cáo</label>
                    <select class="form-control" name="" id="period_select" (change)="changePeriod()" [(ngModel)]="selectedPeriod">
                        <option *ngFor="let period of periods" [ngValue]="period">{{period}}</option>
                    </select>
                </div>
            </div>
            <div class="col-lg-3" *ngIf="selectedMonth > 0">
                <div class="form-group">
                    <label for="month_select">Tháng báo cáo</label>
                    <select class="form-control" name="" id="month_select" [(ngModel)]="selectedMonth">
                        <option *ngFor="let month of months" [ngValue]="month">{{month}}</option>
                    </select>
                </div>
            </div>
            <div class="col-lg-3" *ngIf="selectedQuarter >0">
                <div class="form-group">
                    <label for="quarter_select">Quý báo cáo</label>
                    <select class="form-control" name="" id="quarter_select" [(ngModel)]="selectedQuarter">
                        <option *ngFor="let quarter of quarters" [ngValue]="quarter.ma_so">{{quarter.ma_chu}}</option>
                    </select>
                </div>
            </div>
            <div class="col-lg-3" *ngIf="selectedHalf >0">
                <!-- {{selectedHalf}} -->
                <div class="form-group">
                    <label for="half_select">Báo cáo 6 Tháng</label>
                    <select class="form-control" name="" id="half_select" [(ngModel)]="selectedHalf">
                        <option *ngFor="let half of halfs" [ngValue]="half">{{half}}</option>
                    </select>
                </div>
            </div>
            <div class="col-lg-3" *ngIf="selectedYear >0">
                <div class="form-group">
                    <label for="year_select">Năm báo cáo</label>
                    <select class="form-control" name="" id="year_select" [(ngModel)]="selectedYear">
                        <option *ngFor="let year of years" [ngValue]="year">{{year}}</option>
                    </select>
                </div>
            </div>
            <div class="col-lg-1">
                <div class="form-group" style="display: flex;justify-content: center;">
                    <button class="form-button" mat-raised-button [ngStyle]="{'background-color': 'green', 'color': 'white'}" (click)="filter()">Tìm kiếm</button>
                </div>
            </div>
        </div>

        <div class="" *ngIf="dataSource.data.length;else ShowList">
            <mat-form-field>
                <mat-label>Lọc dữ liệu</mat-label>
                <input matInput (keyup)="applyFilter($event)" placeholder="" #input>
            </mat-form-field>

            <table mat-table [dataSource]="dataSource" style="width: 100%;">

                <ng-container matColumnDef="index">
                    <th mat-header-cell *matHeaderCellDef> STT </th>
                    <td mat-cell *matCellDef="let element; let i = index;"> {{i+1}} </td>
                </ng-container>

                <ng-container matColumnDef="obj_code">
                    <th mat-header-cell *matHeaderCellDef> Mã báo cáo </th>
                    <td mat-cell *matCellDef="let element;"> {{element.obj_code}} </td>
                </ng-container>

                <ng-container matColumnDef="obj_name">
                    <th mat-header-cell *matHeaderCellDef> Tên báo cáo </th>
                    <td mat-cell *matCellDef="let element" class="text-primary"> <a (click)="OpenDetailObject(element.obj_id)">{{element.obj_name}}</a></td>
                </ng-container>

                <ng-container matColumnDef="org_name">
                    <th mat-header-cell *matHeaderCellDef> Đơn vị báo cáo </th>
                    <td mat-cell *matCellDef="let element">{{element.org_name}}</td>
                </ng-container>

                <ng-container matColumnDef="start_date">
                    <th mat-header-cell *matHeaderCellDef> Thời gian bắt đầu</th>
                    <td mat-cell *matCellDef="let element;"> {{element.start_date}} </td>
                </ng-container>

                <ng-container matColumnDef="end_date">
                    <th mat-header-cell *matHeaderCellDef> Thời gian kết thúc</th>
                    <td mat-cell *matCellDef="let element;"> {{element.end_date}} </td>
                </ng-container>

                <ng-container matColumnDef="edit">
                    <th mat-header-cell *matHeaderCellDef> Thao tác </th>
                    <td mat-cell *matCellDef="let element">
                        <a class="btn" (click)="OpenDetailObject(element.obj_id)">
                            <mat-icon>edit</mat-icon>
                        </a>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>

            <mat-paginator MatPaginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
        </div>

        <ng-template #ShowList>
            <p class="text-center"><strong>Không có báo cáo</strong></p>
        </ng-template>
    </mat-card-content>
    <mat-card-actions></mat-card-actions>
</mat-card>